"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t,n,r=require("react"),o=e(r),a=(e(require("prop-types")),require("@reach/auto-id")),i=require("@reach/utils");function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(o[n]=e[n]);return o}(t=exports.SliderOrientation||(exports.SliderOrientation={})).Horizontal="horizontal",t.Vertical="vertical",(n=exports.SliderHandleAlignment||(exports.SliderHandleAlignment={})).Center="center",n.Contain="contain";var s=exports.SliderOrientation.Horizontal,c=exports.SliderOrientation.Vertical,d=exports.SliderHandleAlignment.Center,v=exports.SliderHandleAlignment.Contain,h=i.createNamedContext("SliderContext",{}),f=function(){return r.useContext(h)},p=(exports,exports,exports,exports,i.forwardRefWithAs((function(e,t){var n=e.children,r=l(e,["children"]);return o.createElement(m,Object.assign({},r,{ref:t,"data-reach-slider":"",_componentName:"Slider"}),o.createElement(w,null,o.createElement(b,null),o.createElement(g,null),n))}))),m=i.forwardRefWithAs((function(e,t){var n=e["aria-label"],u=e["aria-labelledby"],s=e["aria-valuetext"],c=e.as,d=void 0===c?"div":c,v=e.defaultValue,f=e.disabled,p=void 0!==f&&f,m=e.value,E=e.getAriaLabel,w=e.getAriaValueText,b=e.getValueText,x=e.handleAlignment,g=void 0===x?exports.SliderHandleAlignment.Center:x,y=e.max,k=void 0===y?100:y,A=e.min,M=void 0===A?0:A,R=e.name,C=e.onChange,D=e.onKeyDown,O=e.onMouseDown,I=e.onMouseMove,P=e.onMouseUp,H=e.onPointerDown,V=e.onPointerUp,N=e.onTouchEnd,_=e.onTouchMove,F=e.onTouchStart,U=e.orientation,j=void 0===U?exports.SliderOrientation.Horizontal:U,W=e.step,K=void 0===W?1:W,B=e.children,q=e._componentName,z=void 0===q?"SliderInput":q,G=l(e,["aria-label","aria-labelledby","aria-valuetext","as","defaultValue","disabled","value","getAriaLabel","getAriaValueText","getValueText","handleAlignment","max","min","name","onChange","onKeyDown","onMouseDown","onMouseMove","onMouseUp","onPointerDown","onPointerUp","onTouchEnd","onTouchMove","onTouchStart","orientation","step","children","_componentName"]);i.useControlledSwitchWarning(m,"value",z);var X=r.useRef(),Y=a.useId(G.id),Z=r.useRef(!1),J=r.useRef(null),Q=r.useRef(null),$=r.useRef(null),ee=i.useForkedRef($,t),te=r.useState(!1),ne=te[0],re=te[1],oe=l(function(e){var t=r.useState({width:0,height:0}),n=t[0],o=n.width,a=n.height,u=t[1];return i.useIsomorphicLayoutEffect((function(){if(e.current){var t=window.getComputedStyle(e.current),n=t.width,r=parseFloat(t.height),i=parseFloat(n);r===a&&i===o||u({height:r,width:i})}}),[e,o,a]),{ref:e,width:o,height:a}}(Q),["ref"]),ae=i.useControlledState(m,v||M),ie=ae[1],ue=S(ae[0],M,k),le=L(ue,M,k),se=j===exports.SliderOrientation.Vertical,ce=se?oe.height:oe.width,de="calc("+le+"% - "+(g===exports.SliderHandleAlignment.Center?ce+"px / 2":ce+"px * "+.01*le)+")",ve=r.useRef(de);i.useIsomorphicLayoutEffect((function(){ve.current=de}),[de]);var he=r.useRef(C);i.useIsomorphicLayoutEffect((function(){he.current=C}),[C]);var fe=r.useCallback((function(e){ie(e),he.current&&he.current(e,{min:M,max:k,handlePosition:ve.current})}),[k,M,ie]),pe=r.useCallback((function(e){return function(e,t,n){var r=n.orientation,o=n.min,a=n.max,i=n.step;if(!t||!e)return null;var u=t.getBoundingClientRect(),l=r===exports.SliderOrientation.Vertical,s=function(e,t,n){return(n-t)*e+t}((l?u.bottom-e.y:e.x-u.left)/(l?u.height:u.width),o,a);return S(i?T(s,i,o):s,o,a)}(function(e,t){if(void 0!==t.current&&e.changedTouches){for(var n=0;n<e.changedTouches.length;n+=1){var r=e.changedTouches[n];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}(e,X),J.current,{step:K,orientation:j,min:M,max:k})}),[k,M,j,K]),me=i.useEventCallback((function(e){if(!p){var t,n=(k-M)/10,r=K||(k-M)/100;switch(e.key){case"ArrowLeft":case"ArrowDown":t=ue-r;break;case"ArrowRight":case"ArrowUp":t=ue+r;break;case"PageDown":t=ue-n;break;case"PageUp":t=ue+n;break;case"Home":t=M;break;case"End":t=k;break;default:return}e.preventDefault(),t=S(K?T(t,K,M):t,M,k),fe(t)}})),Ee=b?b(ue):w?w(ue):s,we=se?{width:"100%",height:le+"%",bottom:0}:{width:le+"%",height:"100%",left:0},be={ariaLabel:E?E(ue):n,ariaLabelledBy:u,ariaValueText:Ee,handleDimensions:oe,handleKeyDown:me,handlePosition:de,handleRef:Q,hasFocus:ne,onKeyDown:D,setHasFocus:re,sliderId:Y,sliderMax:k,sliderMin:M,value:ue,disabled:!!p,isVertical:se,orientation:j,trackPercent:le,trackRef:J,trackHighlightStyle:we,updateValue:fe},xe=r.useRef(i.noop),ge=r.useRef(i.noop),ye=r.useRef(i.noop),Se=r.useRef({onMouseMove:I,onMouseDown:O,onMouseUp:P,onTouchStart:F,onTouchEnd:N,onTouchMove:_,onPointerDown:H,onPointerUp:V});i.useIsomorphicLayoutEffect((function(){Se.current.onMouseMove=I,Se.current.onMouseDown=O,Se.current.onMouseUp=P,Se.current.onTouchStart=F,Se.current.onTouchEnd=N,Se.current.onTouchMove=_,Se.current.onPointerDown=H,Se.current.onPointerUp=V}),[I,O,P,F,N,_,H,V]);var Te=i.useEventCallback((function(e){var t;if(p)Z.current=!1;else{if(Z.current=!0,e.changedTouches){var n;e.preventDefault();var r=null===(n=e.changedTouches)||void 0===n?void 0:n[0];null!=r&&(X.current=r.identifier)}var o=pe(e);null!=o&&(null===(t=Q.current)||void 0===t||t.focus(),fe(o),xe.current=Re(),ye.current=Ce())}})),Le=i.useEventCallback((function(e){var t;p?Z.current=!1:(Z.current=!0,null===(t=$.current)||void 0===t||t.setPointerCapture(e.pointerId))})),ke=i.useEventCallback((function(e){var t;null===(t=$.current)||void 0===t||t.releasePointerCapture(e.pointerId),Z.current=!1})),Ae=i.useEventCallback((function(e){if(!p&&Z.current){var t=pe(e);null!=t&&fe(t)}else Z.current=!1})),Me=i.useEventCallback((function(e){Z.current=!1,null!=pe(e)&&(X.current=void 0,xe.current(),ye.current())})),Re=r.useCallback((function(){var e=i.getOwnerDocument($.current)||document,t=i.wrapEvent(Se.current.onTouchMove,Ae),n=i.wrapEvent(Se.current.onMouseMove,Ae);return e.addEventListener("touchmove",t),e.addEventListener("mousemove",n),function(){e.removeEventListener("touchmove",t),e.removeEventListener("mousemove",n)}}),[Ae]),Ce=r.useCallback((function(){var e=i.getOwnerDocument($.current)||document,t=i.wrapEvent(Se.current.onPointerUp,ke),n=i.wrapEvent(Se.current.onTouchEnd,Me),r=i.wrapEvent(Se.current.onMouseUp,Me);return"PointerEvent"in window&&e.addEventListener("pointerup",t),e.addEventListener("touchend",n),e.addEventListener("mouseup",r),function(){"PointerEvent"in window&&e.removeEventListener("pointerup",t),e.removeEventListener("touchend",n),e.removeEventListener("mouseup",r)}}),[Me,ke]),De=r.useCallback((function(){var e=i.wrapEvent(Se.current.onTouchStart,Te),t=i.wrapEvent(Se.current.onMouseDown,Te),n=i.wrapEvent(Se.current.onPointerDown,Le);return $.current.addEventListener("touchstart",e),$.current.addEventListener("mousedown",t),"PointerEvent"in window&&$.current.addEventListener("pointerdown",n),function(){$.current.removeEventListener("touchstart",e),$.current.removeEventListener("mousedown",t),"PointerEvent"in window&&$.current.removeEventListener("pointerdown",n)}}),[Le,Te]);return r.useEffect((function(){return ge.current=De(),function(){ge.current(),ye.current(),xe.current()}}),[De]),r.useEffect((function(){return i.checkStyles("slider")}),[]),o.createElement(h.Provider,{value:be},o.createElement(d,Object.assign({},G,{ref:ee,"data-reach-slider-input":"","data-disabled":p?"":void 0,"data-orientation":j,tabIndex:-1}),i.isFunction(B)?B({hasFocus:ne,id:Y,max:k,min:M,value:ue,ariaValueText:Ee,valueText:Ee}):B,R&&o.createElement("input",{type:"hidden",value:ue,name:R,id:Y&&i.makeId("input",Y)})))})),E=i.forwardRefWithAs((function(e,t){var n=e.as,r=void 0===n?"div":n,a=e.children,s=e.style,c=void 0===s?{}:s,d=l(e,["as","children","style"]),v=f(),h=v.disabled,p=v.orientation,m=i.useForkedRef(v.trackRef,t);return o.createElement(r,Object.assign({ref:m,style:u({},c,{position:"relative"})},d,{"data-reach-slider-track":"","data-disabled":h?"":void 0,"data-orientation":p}),a)})),w=i.memoWithAs(E),b=i.memoWithAs(i.forwardRefWithAs((function(e,t){var n=e.as,r=void 0===n?"div":n,a=e.style,i=void 0===a?{}:a,s=l(e,["as","children","style"]),c=f(),d=c.disabled,v=c.orientation;return o.createElement(r,Object.assign({ref:t,style:u({position:"absolute"},c.trackHighlightStyle,i)},s,{"data-reach-slider-track-highlight":"","data-disabled":d?"":void 0,"data-orientation":v}))}))),x=i.forwardRefWithAs((function(e,t){var n=e.as,r=void 0===n?"div":n,a=e.onBlur,s=e.onFocus,c=e.style,d=void 0===c?{}:c,v=e.onKeyDown,h=l(e,["as","onBlur","onFocus","style","onKeyDown"]),p=f(),m=p.ariaLabel,E=p.ariaLabelledBy,w=p.ariaValueText,b=p.disabled,x=p.handlePosition,g=p.isVertical,y=p.handleKeyDown,S=p.orientation,T=p.setHasFocus,L=p.sliderMin,k=p.sliderMax,A=p.value,M=i.useForkedRef(p.handleRef,t);return o.createElement(r,Object.assign({"aria-disabled":b||void 0,"aria-label":m,"aria-labelledby":m?void 0:E,"aria-orientation":S,"aria-valuemax":k,"aria-valuemin":L,"aria-valuenow":A,"aria-valuetext":w,role:"slider",tabIndex:b?-1:0},h,{"data-reach-slider-handle":"",ref:M,onBlur:i.wrapEvent(a,(function(){T(!1)})),onFocus:i.wrapEvent(s,(function(){T(!0)})),onKeyDown:i.wrapEvent(v,y),style:u({position:"absolute"},g?{bottom:x}:{left:x},d)}))})),g=i.memoWithAs(x),y=i.memoWithAs(i.forwardRefWithAs((function(e,t){var n=e.as,r=void 0===n?"div":n,a=e.children,i=e.style,s=void 0===i?{}:i,c=e.value,d=l(e,["as","children","style","value"]),v=f(),h=v.disabled,p=v.isVertical,m=v.orientation,E=v.sliderMin,w=v.sliderMax,b=v.value,x=!(c<E||c>w),g=L(c,E,w)+"%",y=c<b?"under-value":c===b?"at-value":"over-value";return x?o.createElement(r,Object.assign({ref:t,style:u({position:"absolute"},p?{bottom:g}:{left:g},s)},d,{"data-reach-slider-marker":"","data-disabled":h?"":void 0,"data-orientation":m,"data-state":y,"data-value":c,children:a})):null})));function S(e,t,n){return e>n?n:e<t?t:e}function T(e,t,n){var r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(function(e){if(Math.abs(e)<1){var t=e.toExponential().split("e-"),n=t[0].split(".")[1];return(n?n.length:0)+parseInt(t[1],10)}var r=e.toString().split(".")[1];return r?r.length:0}(t)))}function L(e,t,n){return 100*(e-t)/(n-t)}exports.SLIDER_HANDLE_ALIGN_CENTER=d,exports.SLIDER_HANDLE_ALIGN_CONTAIN=v,exports.SLIDER_ORIENTATION_HORIZONTAL=s,exports.SLIDER_ORIENTATION_VERTICAL=c,exports.Slider=p,exports.SliderHandle=g,exports.SliderInput=m,exports.SliderMarker=y,exports.SliderTrack=w,exports.SliderTrackHighlight=b,exports.default=p;
//# sourceMappingURL=slider.cjs.production.min.js.map
